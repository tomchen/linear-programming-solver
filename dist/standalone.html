<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Solveur de programme linéaire (méthode graphique)</title><style>/* CSS reset */html{box-sizing: border-box; font-size: 16px;}*, *:before, *:after{box-sizing: inherit;}body, h1, h2, h3, h4, h5, h6, p, ol, ul{margin: 0; padding: 0; font-weight: normal;}ol, ul{list-style: none;}img{max-width: 100%; height: auto;}/* main */html, input, select, button{font-family: -apple-system, "Noto Sans", "Helvetica Neue", Helvetica, "Nimbus Sans L", Arial, "Liberation Sans", sans-serif;font-size: 15px;}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance: none;margin: 0;}input[type=number]{width: 4em;height: 1.6em;}select{height: 1.6em;}html{background-color: #fffcef;text-align: center;}button{background: #ffe066;color: black;border: 1px solid #333;transition: opacity 0.6s;}.posint button{height: 1.6em;width: 1.6em;}#buttonst-block button{line-height: 1.6em;}#solve{font-weight: bold;}button:hover, button:active{opacity: 0.5;}button:hover{cursor: pointer;}h1{font-weight: bold;font-size: 150%;}h1,#input-container,#variable-number-block,#constraint-number-block,#equation,#additional-contraint-block,#generate-button-block,#solve-button-block,#result,#canvas-container{margin: 0.2rem 0;}#wrapper{margin: 0.5rem;}.posint input[type=number]{width: 2em;}.polynomial .term::after{content: attr(data-no);vertical-align: sub; font-size: smaller;}.polynomial .term .variable::after{content: attr(data-var);}.polynomial .term:not(:first-child)::before{content: '+';}#constraint-example{display: none;}#result{background: #ff897c;font-weight: bold;display: inline-block;padding: 1em;}#canvas-container{position: relative;width: 500px;height: 500px;display: block;max-width: 90vw;margin: auto;}canvas{position: absolute;left: 0px;top: 0px;border: 1px solid #000;display: block;max-width: 90vw;}#layer1{z-index: 1;}#layer2{z-index: 2;}#layer3{z-index: 3;}</style></head><body><div id="wrapper"><h1>Solveur de programme linéaire (méthode graphique)</h1><div id="input-container"><div id="variable-number-block">Nombre de variables : <span class="posint" id="vars-number"><button decrement>-</button><input id="vars-number-input" type="number" step="1" min="1" max="9999" value="0"><button increment>+</button></span></div><div id="constraint-number-block">Nombre de contraintes : <span class="posint" id="constraint-number"><button decrement>-</button><input id="constraint-number-input" type="number" step="1" min="1" max="9999" value="0"><button increment>+</button></span></div><div class="equation extremization"><select class="sign selectable-sign"><option value="max">Max</option><option value="min">Min</option></select><span id="">Z</span><span class="sign">=</span><span class="polynomial"></span></div><div id="constraint-list"></div><div class="equation constraint" id="constraint-example" data-cno=""><span class="polynomial"></span><select class="sign selectable-sign"><option selected value="<=">≤</option><option value=">=">≥</option><option value="=">=</option></select><input class="result-input" value="" type="number" step="any"/></div><div id="additional-contraint-block"><span class="variable">x<sub>1, 2,...</sub></span> ≥ 0</div><div id="buttonst-block"><div id="generate-button-block"><button id="generate-typical" title="Générer valeurs toujours positives, signes toujours &quot;≤&quot;, Z toujours à maximiser">Générer valeurs aléatoires typiques</button><button id="generate">Générer valeurs aléatoires</button></div><div id="solve-button-block"><button id="solve">Résoudre avec méthode graphique<br>(seulement pour 2 variables)</button></div></div><div id="result"></div></div><div id="canvas-container"><canvas id="layer1" width="500" height="500" class="canvas-coordgrid"></canvas><canvas id="layer2" width="500" height="500" class="canvas-main"></canvas><canvas id="layer3" width="500" height="500" class="canvas-coordtext"></canvas></div></div><script>!function(){try{var e=0,t=0,a=function(t){var a=document.querySelectorAll(".polynomial");e==t||(e<t?[].forEach.call(a,function(a){for(var n=e+1;n<=t;n++){var r=document.createElement("span");r.className="term",r.dataset.no=n,r.innerHTML='<input class="term-input" value="" type="number" step="any" /><span class="variable" data-var="x"></span></span>',a.appendChild(r)}}):[].forEach.call(a,function(a){for(var n=e;n>t;n--)a.removeChild(a.lastChild)})),e=t},n=function(e){var a=document.querySelector("#constraint-list");if(t==e);else if(t<e)for(var n=t+1;n<=e;n++){var r=document.querySelector("#constraint-example").cloneNode(!0);r.id="",r.dataset.cno=n,a.appendChild(r)}else for(n=t;n>e;n--)a.removeChild(a.lastChild);t=e},r=function(e){var t,a;[].forEach.call(document.querySelectorAll(".extremization .term-input"),function(t){t.value=e?Math.floor(51*Math.random()):Math.floor(101*Math.random())-50}),document.querySelector(".extremization option[value='"+(e||Math.random()>=.5?"max":"min")+"']").selected=!0,[].forEach.call(document.querySelectorAll("#constraint-list .constraint"),function(n){[].forEach.call(n.querySelectorAll(".term-input"),function(t){t.value=e?Math.floor(11*Math.random()):Math.floor(21*Math.random())-10}),n.querySelector(".result-input").value=e?Math.floor(51*Math.random()):Math.floor(101*Math.random())-50,t=Math.random(),a=e||t<=.45?"<=":t<=.9?">=":"=",n.querySelector("option[value='"+a+"']").selected=!0})},i=document.querySelectorAll(".posint");[].forEach.call(i,function(r){var i=r.querySelector("button[increment]"),c=r.querySelector("button[decrement]"),l=r.querySelector("input"),o=+l.max,u=+l.min,s=+l.step;i.addEventListener("click",function(){var e=+l.value+s;l.value=e,l.dispatchEvent(new Event("change"))},!1),c.addEventListener("click",function(){var e=+l.value-s;l.value=e,l.dispatchEvent(new Event("change"))},!1),l.addEventListener("change",function(){var r=this.value;/^[0-9]+$/.test(r)&&+r>=u&&+r<=o?"vars-number-input"==this.id?a(+r):n(+r):"vars-number-input"==this.id?this.value=e:this.value=t})}),document.querySelector("#generate").addEventListener("click",function(){r(!1)},!1),document.querySelector("#generate-typical").addEventListener("click",function(){r(!0)},!1),document.querySelector("#solve").addEventListener("click",function(){if(2!=e)return document.querySelector("#result").innerHTML="La mèthode graphique ne fonctionne que pour 2 variables !",m.clearRect(0,0,m.canvas.width,m.canvas.height),p.clearRect(0,0,m.canvas.width,m.canvas.height),void g.clearRect(0,0,m.canvas.width,m.canvas.height);var t={},a=[],n=document.querySelectorAll(".extremization .term-input");if(""===n[0].value&&(n[0].value=0),""===n[1].value&&(n[1].value=0),"0"===n[0].value&&"0"===n[1].value)return document.querySelector("#result").innerHTML="Z est toujours de 0 !",m.clearRect(0,0,m.canvas.width,m.canvas.height),p.clearRect(0,0,m.canvas.width,m.canvas.height),void g.clearRect(0,0,m.canvas.width,m.canvas.height);t.a=+n[0].value,t.b=+n[1].value;var r=document.querySelector(".extremization .sign");t.ext=r.options[r.selectedIndex].value,[].forEach.call(document.querySelectorAll("#constraint-list .constraint"),function(e){var t={};""===(n=e.querySelectorAll(".term-input"))[0].value&&(n[0].value=0),""===n[1].value&&(n[1].value=0),t.a=+n[0].value,t.b=+n[1].value,t.c=+e.querySelector(".result-input").value,r=e.querySelector(".sign"),t.sign=r.options[r.selectedIndex].value,a.push(t)});var i=a.slice(0);i.push({a:1,b:0,c:0,sign:">="}),i.push({a:0,b:1,c:0,sign:">="});var E=T(i),w=[],A=[];E.forEach(function(e){"object"==typeof e&&(w.push(e.x),A.push(e.y))}),0!==w.length&&(v=Math.ceil(Math.max.apply(null,w)),d=Math.floor(Math.min.apply(null,w)),x=Math.ceil(Math.max.apply(null,A)),y=Math.floor(Math.min.apply(null,A)));var k,z,H=v-d,I=x-y;H<6&&(v=Math.ceil(v+(6-H)/2),d=Math.floor(d-(6-H)/2)),I<6&&(x=Math.ceil(x+(6-I)/2),y=Math.floor(y-(6-I)/2)),function(){p.clearRect(0,0,p.canvas.width,p.canvas.height),g.clearRect(0,0,g.canvas.width,g.canvas.height),c=(v-d)*(1+f)/m.canvas.width,l=(x-y)*(1+f)/m.canvas.height,o=m.canvas.width*(f/2)+(0-d)/c,u=m.canvas.height*(f/2)+(0-y)/l,s=Math.round(S*c),S=s/c,h=Math.round(q*l),q=h/l,p.strokeStyle="#ddd",g.font="14px Arial",g.textAlign="center";for(var e=o+S,t=s;e<m.canvas.width;e+=S,t+=s)b({x:e,y:0},{x:e,y:m.canvas.height},p),L(t,{x:e,y:u-12},g);for(var e=o-S,t=-s;e>0;e-=S,t-=s)b({x:e,y:0},{x:e,y:m.canvas.height},p),L(t,{x:e,y:u-12},g);g.textAlign="right",L("0",{x:o,y:u-12},g);for(var a=u+q,t=h;a<m.canvas.height;a+=q,t+=h)b({x:0,y:a},{x:m.canvas.width,y:a},p),L(t,{x:o,y:a-6},g);for(var a=u-q,t=-h;a>0;a-=q,t-=h)b({x:0,y:a},{x:m.canvas.width,y:a},p),L(t,{x:o,y:a-6},g)}(),m.clearRect(0,0,m.canvas.width,m.canvas.height),z=(k=a).length+2,m.fillStyle="rgba(0, 0, 200, "+1.1/z+")",m.strokeStyle="#0000ff",k.forEach(function(e){R(e.a,e.b,e.c,e.sign)}),m.strokeStyle="#000",R(1,0,0,">="),R(0,1,0,">="),m.strokeStyle="red",C(t.a,t.b,0);var Z=P(E,i);m.fillStyle="yellow",Z.forEach(function(e){M(e,3,m,!0)});var V,j=P(T(i,!0),i);if(0===j.length)V="Valeur "+("max"===t.ext?"maximale":"minimale")+" de Z n'existe pas.";else{var N=[];j.forEach(function(e){N.push(t.a*e.x+t.b*e.y)});var X=Math[t.ext].apply(null,N),Y=N.reduce(function(e,t,a){return t===X&&e.push(a),e},[]),$=[];Y.forEach(function(e){$.push(j[e])}),$=$.filter(function(e,t,a){return t===a.findIndex(function(t){return t.x===e.x&&t.y===e.y})});var B=F({x:0,y:0}),D=F({x:m.canvas.width,y:m.canvas.height});$.every(function(e){if(+e.x.toFixed(8)==+B.x.toFixed(8)||+e.x.toFixed(8)==+D.x.toFixed(8)||+e.y.toFixed(8)==+B.y.toFixed(8)||+e.y.toFixed(8)==+D.y.toFixed(8))return!0})?V="Valeur "+("max"===t.ext?"maximale":"minimale")+" de Z est l'infini positif ou négatif.":(V="Valeur "+("max"===t.ext?"maximale":"minimale")+" de Z est de "+ +X.toFixed(5)+", qui se produit sur ",1===$.length?V+="le point ":V+="les points ",$.forEach(function(e,t){console.log(t),m.fillStyle="red",M(e,3,m,!0),V+="("+ +e.x.toFixed(5)+", "+ +e.y.toFixed(5)+")",1!==$.length&&(t===$.length-2?V+=" et ":t!==$.length-1&&(V+=", "))}),1===$.length?V+=".":V+=", ainsi que tous les points sur le segment de droite entre eux.")}document.querySelector("#result").innerHTML=V},!1),document.querySelector("#vars-number-input").value=2,a(2),document.querySelector("#constraint-number-input").value=2,n(2),r(!0);var c,l,o,u,s,h,v=10,d=-10,x=10,y=-10,f=.14,m=document.querySelector(".canvas-main").getContext("2d"),p=document.querySelector(".canvas-coordgrid").getContext("2d"),g=document.querySelector(".canvas-coordtext").getContext("2d"),S=m.canvas.width/(10*(1+f)),q=m.canvas.height/(10*(1+f));function M(e,t,a,n){n&&(e=w(e)),(a=a||m).beginPath(),a.arc(e.x,a.canvas.height-e.y,t,0,2*Math.PI,!0),a.closePath(),a.fill()}function b(e,t,a,n){n&&(e=w(e),t=w(t)),(a=a||m).beginPath(),a.moveTo(e.x,a.canvas.height-e.y),a.lineTo(t.x,a.canvas.height-t.y),a.closePath(),a.stroke()}function E(e,t,a){(t=t||m).beginPath(),e.forEach(function(e,n){a&&(e=w(e)),0===n?t.moveTo(e.x,t.canvas.height-e.y):t.lineTo(e.x,t.canvas.height-e.y)}),t.closePath(),t.fill()}function w(e){return pixelX=o+e.x/c,pixelY=u+e.y/l,{x:pixelX,y:pixelY}}function F(e){return{x:c*(e.x-o),y:l*(e.y-u)}}function A(e,t,a,n){var r,i;if(a&&(e=w(e),t=w(t)),e.x==t.x){if(e.y==t.y)return;r={x:e.x,y:0},i={x:e.x,y:m.canvas.height}}else if(e.y==t.y)r={x:0,y:e.y},i={x:m.canvas.width,y:e.y};else{var c=(t.y-e.y)/(t.x-e.x),l=t.y-c*t.x,o=function(e){return(e-l)/c};r={x:o(0),y:0},i={x:o(m.canvas.height),y:m.canvas.height}}return n||b(r,i),{start:r,end:i}}function L(e,t,a,n){n&&(t=w(t)),(a=a||m).fillText(e,t.x,m.canvas.height-t.y)}function k(e,t,a,n,r,i){if(0===e&&0===t||0===n&&0===r)return"invalid";if(0===t&&0===r&&a!==i||0===e&&0===n&&a!==i)return"parallel";if(0===t&&0===r&&a===i||0===e&&0===n&&a===i)return"same line";if(0===t)var c=a/e,l=i/r-a*n/(e*r);else if(0===r)c=i/n,l=a/t-i*e/(n*t);else if(0===e)c=i/n-r*a/(t*n),l=a/t;else if(0===n)c=a/e-t*i/(r*e),l=i/r;else{if(e/t==n/r)return a/t==i/r?"same line":"parallel";c=(i-a*r/t)/(n-e*r/t),l=(i-a*n/e)/(r-t*n/e)}return{x:c,y:l}}function C(e,t,a){return 0===e&&0===t?void 0:0===e?A({x:0,y:a/t},{x:1,y:a/t},!0):0===t?A({x:a/e,y:0},{x:a/e,y:1},!0):0===a?A({x:0,y:0},{x:1,y:-e/t},!0):A({x:0,y:a/t},{x:a/e,y:0},!0)}function R(e,t,a,n){var r=C(e,t,a),i={x:0,y:m.canvas.height},c={x:m.canvas.width,y:m.canvas.height},l={x:0,y:0},o={x:m.canvas.width,y:0};"="==n||0===e&&0===t||E(">="==n&&e>0||"<="==n&&e<0?[r.start,o,c,r.end]:">="==n&&e<0||"<="==n&&e>0?[r.start,l,i,r.end]:">="==n&&t>0||"<="==n&&t<0?[r.start,i,c,r.end]:[r.start,l,o,r.end])}function T(e,t){if(t){var a=F({x:0,y:0}),n=F({x:m.canvas.width,y:m.canvas.height}),r=[];r.push({a:1,b:0,c:a.x,sign:"="}),r.push({a:0,b:1,c:a.y,sign:"="}),r.push({a:1,b:0,c:n.x,sign:"="}),r.push({a:0,b:1,c:n.y,sign:"="})}for(var i=[],c=0,l=e.length;c<l;c++){for(var o=c+1;o<l;o++)i.push(k(e[c].a,e[c].b,e[c].c,e[o].a,e[o].b,e[o].c));t&&r.forEach(function(t){i.push(k(e[c].a,e[c].b,e[c].c,t.a,t.b,t.c))})}return i}function P(e,t){return e.filter(function(e){return"string"!=typeof e&&t.every(function(t){var a;return"<="===t.sign?a=+(t.a*e.x+t.b*e.y).toFixed(8)<=+t.c.toFixed(8):">="===t.sign?a=+(t.a*e.x+t.b*e.y).toFixed(8)>=+t.c.toFixed(8):"="===t.sign&&(a=+(t.a*e.x+t.b*e.y).toFixed(8)==+t.c.toFixed(8)),a})})}}catch(e){}}();</script></body></html>